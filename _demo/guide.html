<!doctype html>
<html>
    <head>
        <title>Isla - Guide</title>
    </head>
    <body style="background-color: #EEE;">
        <h1>ISLA Language Guide</h1>

        <h2>Basic units of the language</h2>

        <h3>Whitespace</h3>
        <ul>
            <li>spaces</li>
            <li>tabs</li>
            <li>new lines</li>
        </ul>

        <h3>Tokens</h3>
        <ul>
            <li>Tokens are delimited by whitespace.</li>
            <li>All tokens, besides strings, are case insensitive.</li>
        </ul>

        <h3>Expressions</h3>
        <ul>
            <li>Expressions in the language are delimited by new lines.</li>
            <li>Regardless of the number of new lines between expressions, all expressions in the program will belong to one block.</li>
        </ul>

        <h3>Blocks</h3>
        <ul>
            <li>An ISLA program can only have one block.</li>
        </ul>

        <hr>

        <h2>Scope and environment</h2>

        <h3>Scope</h3>
        <ul>
            <li>An ISLA program has a single, global scope.</li>
            <li>All variables, types and functions are always in scope.</li>
            <li>new lines</li>
        </ul>

        <h3>Environment</h3>
        The environment consists of two things:
        <ul>
            <li>the return value of the previously executed expression (If an expression does not return anything, the return value is "nil")</li>
            <li>the current context. This contains:
                <ol>
                    <li>a map of all available object types</li>
                    <li>a map of variables and functions that are in scope (every variable ever instantiated and all the built in functions)</li>
                </ol>
            </li>
        </ul>

        <hr>

        <h2>Reserved words</h2>

        <ul>
            <li>is</li>
            <li>a</li>
            <li>list</li>
            <li>add</li>
            <li>take</li>
            <li>to</li>
            <li>from</li>
            <li>true</li>
            <li>false</li>
        </ul>

        <hr>

        <h2>Variables</h2>

        Variables are denoted by single words that match this regex: [A-Za-z]+.

        <h3>Variable assignment</h3>

        Simple (non-object) variables can be strings or references to other variables and are assigned, thus:

        <ul>
            <li>age is '1'</li>
            <li>name is 'Mary'</li>
            <li>friend is isla</li>
        </ul>

        <hr>

        <h2>Values</h2>

        <h3>Numbers</h3>
        <ul>
            <li>There are no numbers in Isla.</li>
            <li>If you want to use a number, quote it in a string, like: '1'.</li>
        </ul>

        <h3>Strings</h3>
        <ul>
            <li>A string literal is delimited by a pair of single quotation 
                marks ' or a pair of double quotation marks ". Contents must 
                match this regex: ^('|\")[A-Za-z0-9 \.,\\']+\1$.</li>
            <li>No string operations are supported, besides assignment to a variable.</li>
        </ul>

        <h3>Booleans</h3>
        <ul>
            <li>Not yet implemented.</li>
        </ul>

        <hr>

        <h2>Objects</h2>

        <ul>
            <li>Objects can be of an existing type, like list, or defined by the programmer.</li>
            <li>Objects have zero or more attributes that may be set.</li>
            <li>Objects have no methods.</li>
        </ul>

        <h3>Instantiation of a built-in type</h3>

        isla is a person

        <h3>Instantiation of a programmer-defined type</h3>

        zach is a giraffe

        You can see that, in order to make a new type, giraffe, you simply name the type.

        <h3>Attribute assignment</h3>

        Objects may have any attribute name assigned on them, regardless of whether they were made from built-in and programmer-defined types.

        <ul>
            <li>isla is a person</li>
            <li>mary is a person</li>
            <li>isla sound is 'pop'</li>
            <li>isla auntie is mary</li>
            <li>isla sdfjhsdhjfshjejhsscf is '3'</li>
        </ul>

        Notice how strings and objects may be assigned to an object attribute.

        <hr>

        <h2>Lists</h2>

        List literals are not supported. Lists can contains any combination of strings and objects. Lists may contain other lists.

        Lists are a little strange. They can only contain one instance of a variable, but can contain many instances of two literals that are identical. For example:

        <pre>
            <code>
basket is a list
add "banana" to basket    =&gt; ["banana"]
add "banana" to basket    =&gt; ["banana" "banana"]
banana is a fruit
add banana to basket      =&gt; ["banana" "banana" banana]
add banana to basket      =&gt; ["banana" "banana" banana]
age is '1'
add age to basket         =&gt; ["banana" "banana" banana age]
add age to basket         =&gt; ["banana" "banana" banana age]
            </code>
        </pre>

        Think of this in terms of references. If you put a banana object into a 
        list twice, you have put in two place holders that lead back to the same 
        place. Thus, the banana object only appears in the list once. Literals are 
        not references; they are actual things. Therefore, when you put a string "banana" 
        in and another string "banana" in, these are two separate things, so they both 
        appear in the list.

        <h3>List operations</h3>

        <h4>Instantiation</h4>
        <pre>
            <code>items is a list</code>
        </pre>

        <h4>Addition</h4>
        <pre>
            <code>items is a list
add 'hi' to items</code>
        </pre>

        <h4>Removal</h4>
        <pre>
            <code>items is a list
take 'bye' from items</code>
        </pre>

        <h4>Membership</h4>
        <pre>
            <code>items has 'hi'</code>
        </pre>

        Returns true or false. Not yet implemented.

        <h3>Access</h3>

        Individual items in lists may not be accessed.

        <hr>

        <h2>Conditionals</h2>

        I haven't decided how to do these yet. However, probably only if 
        statements will be allowed, and they will occupy the same line as 
        their single conditional branch, like: open door if player has key.

        <hr>

        <h2>Functions</h2>
        
        It is not possible to define functions. However, it is possible to call 
        built in functions. Currently, functions may take a maximum of one parameter. 
        This may change.
        
        A function invocation:
        <pre>
            <code>write name</code>
        </pre>
        
        It is possible to pass object attributes as parameters:
        <pre>
            <code>write mary age</code>
        </pre>
        
        <h3>Built in functions</h3>
        
        <strong>write</strong> This function prints out the passed argument to the standard output. It also returns the argument.
    </body>
</html>
